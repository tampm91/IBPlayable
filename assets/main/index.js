window.__require=function t(e,o,i){function n(a,s){if(!o[a]){if(!e[a]){var r=a.split("/");if(r=r[r.length-1],!e[r]){var p="function"==typeof __require&&__require;if(!s&&p)return p(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var l=o[a]={exports:{}};e[a][0].call(l.exports,function(t){return n(e[a][1][t]||t)},l,l.exports,t,e,o,i)}return o[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<i.length;a++)n(i[a]);return n}({AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"bc616pDHixAXLh0zRxItq2O","AudioManager");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,i){var n,c=arguments.length,a=c<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(c<3?n(a):c>3?n(e,o,a):n(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=a.property,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.playMaggotSound=function(){cc.audioEngine.play(this.maggotSound,!0,1)},e.prototype.playCreamWaterDrop=function(){cc.audioEngine.play(this.creamWaterDrop,!1,1)},e.prototype.playCreamWash=function(){var t=this;cc.audioEngine.play(this.creamWash,!1,1),this.scheduleOnce(function(){cc.audioEngine.play(t.creamWash,!1,1)},.5)},e.prototype.playEndSound=function(){cc.audioEngine.play(this.endSound,!1,1)},e.prototype.playShowItem=function(){cc.audioEngine.play(this.showItem,!1,1)},e.prototype.playKillMaggot=function(){cc.audioEngine.play(this.killMaggot,!1,1)},e.prototype.playKillMaggot1=function(){cc.audioEngine.play(this.killMaggot1,!1,1)},e.prototype.playKillMaggot2=function(){var t=this;cc.audioEngine.play(this.killMaggot2,!1,1),this.scheduleOnce(function(){cc.audioEngine.play(t.killMaggot2,!1,1)},.5)},c([r(cc.AudioClip)],e.prototype,"maggotSound",void 0),c([r(cc.AudioClip)],e.prototype,"creamWaterDrop",void 0),c([r(cc.AudioClip)],e.prototype,"creamWash",void 0),c([r(cc.AudioClip)],e.prototype,"endSound",void 0),c([r(cc.AudioClip)],e.prototype,"showItem",void 0),c([r(cc.AudioClip)],e.prototype,"killMaggot",void 0),c([r(cc.AudioClip)],e.prototype,"killMaggot1",void 0),c([r(cc.AudioClip)],e.prototype,"killMaggot2",void 0),c([s("AudioManager")],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],BgScale:[function(t,e,o){"use strict";cc._RF.push(e,"e77ee6J3KxG8a2YrLcHaFnr","BgScale");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,i){var n,c=arguments.length,a=c<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(c<3?n(a):c>3?n(e,o,a):n(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.update=function(){this.setFitSize()},e.prototype.setFitSize=function(){var t=this.node.width,e=cc.winSize.width,o=cc.winSize.height;e!=t&&(this.node.width=e,this.node.height=o),e<o&&(this.node.width=e+100)},c([s("BgScale")],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],GameController:[function(t,e){"use strict";cc._RF.push(e,"04007DBpENBvps8KwybLfBX","GameController"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){window.gameReady&&window.gameReady()},onFinish:function(){window.gameEnd&&window.gameEnd()},installHandle:function(){this.onFinish(),"undefined"==typeof playableSDK?"undefined"==typeof ExitApi?"undefined"==typeof dapi?"undefined"==typeof mraid||"function"!=typeof mraid.open?"function"==typeof window.install&&window.install():mraid.open("https://itunes.apple.com/us/app/id6449269733?mt=8"):dapi.openStoreUrl():ExitApi.exit():window.playableSDK.openAppStore()}}),cc._RF.pop()},{}],GamePlay:[function(t,e,o){"use strict";cc._RF.push(e,"1f602Qc5thE7q4nonQX9g8G","GamePlay");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,i){var n,c=arguments.length,a=c<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(c<3?n(a):c>3?n(e,o,a):n(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./AudioManager"),s=cc._decorator,r=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.baseGame=null,e.AudioManager=null,e.isPlay=!1,e.isRotate=!1,e.startPos=null,e.background=null,e.hand=null,e.dirty=null,e.creamSpine=null,e.creamEmptyNode=null,e.instruct=null,e.tweezers=null,e.tweezersEmptyNode=null,e.handImpacts=[],e.countPointImpact=0,e.statusArr=[!1,!1,!1,!1],e.isClean=!1,e.overlay=null,e.tryAgian=null,e.logo=null,e.sratchAble=null,e.worm1=null,e.worm2=null,e.impactArea=null,e.subTweezers=null,e.subTweezers2=null,e.subTweezers3=null,e.isImpact=!1,e.isEnd=!1,e.isStopAll=!1,e}return n(e,t),e.prototype.update=function(){var t=cc.winSize.width;t<cc.winSize.height?(this.isRotate=!1,this.handImpacts[0].x=-70,this.handImpacts[0].y=164,this.handImpacts[1].x=0,this.handImpacts[1].y=-80,this.handImpacts[2].x=70,this.handImpacts[2].y=-230,this.handImpacts[3].x=110,this.handImpacts[3].y=94,this.baseGame.scaleX=1,this.baseGame.scaleY=1,this.sratchAble.scaleX=1,this.sratchAble.scaleY=1,this.logo.scaleX=.35,this.logo.scaleY=.35,this.baseGame.y=0,this.sratchAble.y=0,this.impactArea.y=55,t<300&&(this.logo.scaleX=.28,this.logo.scaleY=.28,this.baseGame.scaleX=.8,this.baseGame.scaleY=.8,this.baseGame.y=-48,this.sratchAble.y=-48,this.sratchAble.scaleX=.8,this.sratchAble.scaleY=.8,this.handImpacts[0].x=-70,this.handImpacts[0].y=100,this.handImpacts[1].x=-10,this.handImpacts[1].y=-105,this.handImpacts[2].x=71,this.handImpacts[2].y=-231,this.handImpacts[3].x=90,this.handImpacts[3].y=30,this.impactArea.y=10)):(this.isRotate=!0,this.logo.scaleX=.55,this.logo.scaleY=.55)},e.prototype.onLoad=function(){var t=this;this.AudioManager=this.getComponent(a.default),this.AudioManager.playMaggotSound(),this.scheduleOnce(function(){t.creamSpine.active=!0},.5),this.scheduleOnce(function(){t.AudioManager.playShowItem()},.8),this.scheduleOnce(function(){t.creamSpine.getComponent(sp.Skeleton).setAnimation(0,"Intro",!1),t.scheduleOnce(function(){t.AudioManager.playCreamWaterDrop()},1.5),t.scheduleOnce(function(){t.instruct.active=!0,t.creamEmptyNode.active=!0,t.isPlay=!0,t.isPlay&&t.registerEvent()},3)},2)},e.prototype.showTweezers=function(){var t=this;this.scheduleOnce(function(){t.creamSpine.active=!1,t.creamEmptyNode.active=!1,t.tweezers.active=!0,t.tweezersEmptyNode.active=!0,t.AudioManager.playShowItem(),t.scheduleOnce(function(){t.instruct.active=!0,cc.winSize.width<300?t.instruct.getComponent(cc.Animation).play("Hand3"):t.instruct.getComponent(cc.Animation).play("Hand2")},1)},1)},e.prototype.registerEvent=function(){var t=this;this.creamEmptyNode.on("touchstart",function(e){t.startPos=e.getLocation(),t.instruct.active=!1}),this.creamEmptyNode.on("touchmove",function(e){t.handImpacts.forEach(function(e){t.creamEmptyNode.getBoundingBox().intersects(e.getBoundingBox())&&t.caculatePointImpact(e.name)}),t.creamSpine.setPosition(t.startPos.x-cc.winSize.width/2-50,t.startPos.y-cc.winSize.height/2-70),t.creamEmptyNode.setPosition(t.startPos.x-cc.winSize.width/2,t.startPos.y-cc.winSize.height/2),t.startPos=e.getLocation()}),this.tweezers.on("touchstart",function(e){t.startPos=e.getLocation(),t.instruct.active=!1,t.endScene(t.isEnd)}),this.tweezers.on("touchmove",function(e){t.isStopAll||(t.impactArea.getBoundingBox().intersects(t.tweezersEmptyNode.getBoundingBox())&&(t.killMaggot(t.isImpact),t.isImpact=!0),t.tweezers.setPosition(t.startPos.x-cc.winSize.width/2,t.startPos.y-cc.winSize.height/2),t.tweezersEmptyNode.setPosition(t.startPos.x-cc.winSize.width/2-25,t.startPos.y-cc.winSize.height/2-85),t.startPos=e.getLocation())})},e.prototype.killMaggot=function(t){var e=this;t||(this.isEnd=!0,this.tweezers.active=!1,this.tweezers.opacity=0,this.tweezersEmptyNode.active=!1,this.subTweezers2.active=!0,this.subTweezers3.active=!0,this.subTweezers2.getComponent(cc.Animation).play("TweezersDrag"),this.subTweezers3.getComponent(cc.Animation).play("TweezersDrag"),this.worm1.getComponent(cc.Animation).play("MaggotDrag"),this.AudioManager.playKillMaggot1(),this.isStopAll=!0,this.scheduleOnce(function(){e.AudioManager.playKillMaggot2()},.7),this.scheduleOnce(function(){e.subTweezers.getComponent(cc.Animation).play("KillMaggot"),e.AudioManager.playKillMaggot()},2.2),this.scheduleOnce(function(){e.subTweezers2.getComponent(cc.Animation).play("FadeAnim"),e.subTweezers3.getComponent(cc.Animation).play("FadeAnim"),e.worm1.getComponent(cc.Animation).play("MaggotFall")},3.2),this.scheduleOnce(function(){e.tweezers.active=!0,e.tweezers.getComponent(cc.Animation).play("Tweezers"),e.AudioManager.playShowItem()},4.2))},e.prototype.endScene=function(t){var e=this;t&&(this.instruct.active=!1,this.overlay.active=!0,this.tryAgian.on("touchend",function(){cc.audioEngine.stopAll(),e.node.getComponent("GameController").installHandle()}),this.scheduleOnce(function(){e.logo.active=!0},2.5),this.scheduleOnce(function(){e.tryAgian.active=!0,e.AudioManager.playEndSound(),e.isRotate?e.tryAgian.getComponent(cc.Animation).play("TryAgain_Rotate"):e.tryAgian.getComponent(cc.Animation).play("TryAgain_Default")},3.5))},e.prototype.caculatePointImpact=function(t){var e=this;if(!this.isClean){switch(t){case"Finger1":this.statusArr[0]||(this.AudioManager.playCreamWash(),this.countPointImpact++),this.statusArr[0]=!0;break;case"Finger2":this.statusArr[1]||(this.AudioManager.playCreamWash(),this.countPointImpact++),this.statusArr[1]=!0;break;case"Finger3":this.statusArr[2]||(this.AudioManager.playCreamWash(),this.countPointImpact++),this.statusArr[2]=!0;break;case"Finger4":this.statusArr[3]||(this.AudioManager.playCreamWash(),this.countPointImpact++),this.statusArr[3]=!0}4===this.countPointImpact&&(this.isClean=!0,this.isClean&&(this.dirty.getComponent(cc.Animation).play("FadeAnim"),this.scheduleOnce(function(){e.creamEmptyNode.active=!1,e.creamSpine.getComponent(cc.Animation).play("FadeAnim")},.5),this.scheduleOnce(function(){e.showTweezers()},1.5)))}},c([p(cc.Node)],e.prototype,"baseGame",void 0),c([p(cc.Component)],e.prototype,"AudioManager",void 0),c([p(cc.Boolean)],e.prototype,"isPlay",void 0),c([p(cc.Boolean)],e.prototype,"isRotate",void 0),c([p(cc.Vec2)],e.prototype,"startPos",void 0),c([p(cc.Node)],e.prototype,"background",void 0),c([p(cc.Node)],e.prototype,"hand",void 0),c([p(cc.Node)],e.prototype,"dirty",void 0),c([p(cc.Node)],e.prototype,"creamSpine",void 0),c([p(cc.Node)],e.prototype,"creamEmptyNode",void 0),c([p(cc.Node)],e.prototype,"instruct",void 0),c([p(cc.Node)],e.prototype,"tweezers",void 0),c([p(cc.Node)],e.prototype,"tweezersEmptyNode",void 0),c([p([cc.Node])],e.prototype,"handImpacts",void 0),c([p(Number)],e.prototype,"countPointImpact",void 0),c([p(Array)],e.prototype,"statusArr",void 0),c([p(cc.Boolean)],e.prototype,"isClean",void 0),c([p(cc.Node)],e.prototype,"overlay",void 0),c([p(cc.Node)],e.prototype,"tryAgian",void 0),c([p(cc.Node)],e.prototype,"logo",void 0),c([p(cc.Node)],e.prototype,"sratchAble",void 0),c([p(cc.Node)],e.prototype,"worm1",void 0),c([p(cc.Node)],e.prototype,"worm2",void 0),c([p(cc.Node)],e.prototype,"impactArea",void 0),c([p(cc.Node)],e.prototype,"subTweezers",void 0),c([p(cc.Node)],e.prototype,"subTweezers2",void 0),c([p(cc.Node)],e.prototype,"subTweezers3",void 0),c([p(cc.Boolean)],e.prototype,"isImpact",void 0),c([p(cc.Boolean)],e.prototype,"isEnd",void 0),c([p(cc.Boolean)],e.prototype,"isStopAll",void 0),c([r("GamePlay")],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./AudioManager":"AudioManager"}],MaskGamePlay2:[function(t,e){"use strict";cc._RF.push(e,"2cf21sgGVhBD5YM+ELGpKCd","MaskGamePlay2");var o=t("Scratchable");cc.Class({extends:cc.Component,properties:{pointClear:cc.Node},onLoad:function(){this.scratchables=this.getComponentsInChildren(o)},update:function(){if(this.pointClear.active){var t=cc.v2(this.pointClear.x+cc.winSize.width/2,this.pointClear.y+cc.winSize.height/2);this.scratchables.forEach(function(e){e.isScratchable&&e.isInBound(t)&&e.scratchHole(t)})}}}),cc._RF.pop()},{Scratchable:"Scratchable"}],MaskGamePlay:[function(t,e){"use strict";cc._RF.push(e,"69d16xBeChDDJHJPIL5jWa6","MaskGamePlay");var o=t("Scratchable");cc.Class({extends:cc.Component,properties:{pointClear:cc.Node},onLoad:function(){this.scratchables=this.getComponentsInChildren(o)},update:function(){if(this.pointClear.active){var t=cc.v2(this.pointClear.x+cc.winSize.width/2,this.pointClear.y+cc.winSize.height/2);this.scratchables.forEach(function(e){e.isScratchable&&e.isInBound(t)&&e.scratchHole(t)})}}}),cc._RF.pop()},{Scratchable:"Scratchable"}],Scratchable:[function(t,e){"use strict";var o;cc._RF.push(e,"62021JpHzZDUK9AVggWE7TV","Scratchable"),(o=t("./GamePlay"))&&o.__esModule,cc.Class({extends:cc.Component,properties:{isWin:cc.Boolean,eraserRadius:{type:cc.Int,default:60}},start:function(){this.audioManager=this.node.parent.getComponent("AudioManager"),this.percentToWin=.9;var t=this.getComponentInChildren(cc.Mask);this.graphics=t._graphics,this.graphics.fillColor=cc.color(255,255,255,0),this.reset()},calculateProgress:function(){if(this.isScratchable){var t=0;this.polygonPointsList.forEach(function(e){e.isHit&&(t+=1)}),this.progress=t/this.polygonPointsList.length,this.progress>=this.percentToWin&&(this.isWin=!0),this.isWin&&(this.fillInstantly(),this.completed=!0,this.isScratchable=!1,this.node.dispatchEvent(new cc.Event.EventCustom("completed",this)))}},reset:function(){this.callbackFlag=!0,this.graphics.clear(),this.tempDrawPoints=[],this.polygonPointsList=[],this.progress=0,this.completed=!1,this.isScratchable=!0,this.initPolygonList()},initPolygonList:function(){for(var t=0;t<this.node.width;t+=this.eraserRadius)for(var e=0;e<this.node.height;e+=this.eraserRadius)this.polygonPointsList.push({rect:cc.rect(t-this.node.width/2,e-this.node.height/2,this.eraserRadius,this.eraserRadius),isHit:!1})},scratchHole:function(t){t=this.node.convertToNodeSpaceAR(t);var e=this.graphics,o=this.tempDrawPoints.length;if(this.tempDrawPoints.push(t),this.calculateProgress(),o<=1)e.circle(t.x,t.y,this.eraserRadius/2),e.fill(),this.polygonPointsList.forEach(function(e){if(!e.isHit){var o=t.x>e.rect.x&&t.x<e.rect.x+e.rect.width,i=t.y>e.rect.y&&t.y<e.rect.y+e.rect.height;o&&i&&(e.isHit=!0)}});else{var i=this.tempDrawPoints[o-2],n=this.tempDrawPoints[o-1];e.moveTo(i.x,i.y),e.lineTo(n.x,n.y),e.lineWidth=this.eraserRadius,e.lineCap=cc.Graphics.LineCap.ROUND,e.lineJoin=cc.Graphics.LineJoin.ROUND,e.strokeColor=cc.color(255,255,255,255),e.stroke(),this.polygonPointsList.forEach(function(t){t.isHit=t.isHit||cc.Intersection.lineRect(i,n,t.rect)})}},resetProgress:function(){this.clearInstantly(),this.polygonPointsList=[],this.tempDrawPoints=[],this.progress=0,this.initPolygonList()},isInBound:function(){return!0},clearInstantly:function(){this.graphics.clear()},fillInstantly:function(){this.graphics.moveTo(0,0),this.graphics.rect(0,0,this.node.width,this.node.height),this.graphics.fill()}}),cc._RF.pop()},{"./GamePlay":"GamePlay"}]},{},["AudioManager","BgScale","GameController","GamePlay","MaskGamePlay","MaskGamePlay2","Scratchable"]);